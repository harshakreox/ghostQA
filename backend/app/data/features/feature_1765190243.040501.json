{
  "id": "feature_1765190243.040501",
  "name": "View Compliance Record Attachments",
  "description": "Alliant Admins can access and view all COI documents attached to compliance records through the Attachments button",
  "created_at": "2025-12-08T16:07:23.042516",
  "updated_at": "2025-12-08T16:07:37.182949",
  "project_id": "ce1a8cc0-da85-48e2-b349-7bf9311e023f",
  "background": [
    {
      "keyword": "Given",
      "text": "I am on the insurer claims dashboard"
    },
    {
      "keyword": "And",
      "text": "I am logged in as an Alliant Admin"
    },
    {
      "keyword": "And",
      "text": "there are compliance records in the list view"
    }
  ],
  "scenarios": [
    {
      "name": "Successfully view attachments through paperclip icon",
      "tags": [
        "@smoke",
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I can see a compliance record with the paperclip icon visible"
        },
        {
          "keyword": "When",
          "text": "I click on the paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see the Attachments tab displayed"
        }
      ]
    },
    {
      "name": "View manually attached documents in Entity Viewer",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has manually attached documents"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see all manually attached documents in the Attachments tab"
        }
      ]
    },
    {
      "name": "View Focus-fetched documents in Entity Viewer",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has documents fetched from Focus"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see all Focus-fetched documents in the Attachments tab"
        }
      ]
    },
    {
      "name": "View both manual and Focus documents together",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has both manually attached and Focus-fetched documents"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see all documents from both sources in the Attachments tab"
        },
        {
          "keyword": "And",
          "text": "the documents should be clearly identified by their source"
        }
      ]
    },
    {
      "name": "Close Entity Viewer after viewing attachments",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have the Entity Viewer open showing attachments"
        },
        {
          "keyword": "When",
          "text": "I click the close button"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should close"
        },
        {
          "keyword": "And",
          "text": "I should return to the compliance records list view"
        }
      ]
    },
    {
      "name": "Navigate between different attachment tabs",
      "tags": [
        "@positive",
        "@navigation"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have the Entity Viewer open with the Attachments tab active"
        },
        {
          "keyword": "When",
          "text": "I navigate to other tabs within the Entity Viewer"
        },
        {
          "keyword": "And",
          "text": "I return to the Attachments tab"
        },
        {
          "keyword": "Then",
          "text": "all attachment documents should still be visible"
        },
        {
          "keyword": "And",
          "text": "the attachment data should remain intact"
        }
      ]
    },
    {
      "name": "Handle records with no attachments",
      "tags": [
        "@negative"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has no attached documents"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see an empty Attachments tab"
        },
        {
          "keyword": "And",
          "text": "I should see a message indicating no attachments are available"
        }
      ]
    },
    {
      "name": "Handle missing paperclip icon for records without attachments",
      "tags": [
        "@negative"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has no documents attached"
        },
        {
          "keyword": "Then",
          "text": "the paperclip icon should not be visible for that record"
        },
        {
          "keyword": "And",
          "text": "the paperclip icon should be disabled or grayed out"
        }
      ]
    },
    {
      "name": "Handle Entity Viewer loading errors",
      "tags": [
        "@negative"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "there is a network connectivity issue"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "I should see an error message"
        },
        {
          "keyword": "And",
          "text": "the system should provide guidance on how to proceed"
        }
      ]
    },
    {
      "name": "Handle corrupted attachment data",
      "tags": [
        "@negative"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has corrupted attachment data"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see an error message for the corrupted attachments"
        },
        {
          "keyword": "But",
          "text": "valid attachments should still be displayed"
        }
      ]
    },
    {
      "name": "View attachments with maximum number of documents",
      "tags": [
        "@edge-case",
        "@boundary"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has the maximum allowed number of attachments"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "all attachments should load and display properly"
        },
        {
          "keyword": "And",
          "text": "the interface should remain responsive"
        }
      ]
    },
    {
      "name": "View attachments with very large file sizes",
      "tags": [
        "@edge-case"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has attachments with very large file sizes"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see loading indicators for large files"
        },
        {
          "keyword": "And",
          "text": "the attachments should eventually load completely"
        }
      ]
    },
    {
      "name": "View attachments with special characters in filenames",
      "tags": [
        "@edge-case"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has attachments with special characters in filenames"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "all filenames should display correctly without encoding issues"
        },
        {
          "keyword": "And",
          "text": "the attachments should be accessible"
        }
      ]
    },
    {
      "name": "Open multiple Entity Viewers simultaneously",
      "tags": [
        "@alternative-flow"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have one Entity Viewer already open"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon on a different compliance record"
        },
        {
          "keyword": "Then",
          "text": "the system should either open a new Entity Viewer"
        },
        {
          "keyword": "And",
          "text": "replace the current Entity Viewer with the new record's attachments"
        },
        {
          "keyword": "And",
          "text": "the behavior should be consistent and user-friendly"
        }
      ]
    },
    {
      "name": "Refresh attachments data while Entity Viewer is open",
      "tags": [
        "@alternative-flow"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have the Entity Viewer open showing attachments"
        },
        {
          "keyword": "When",
          "text": "new documents are added to the compliance record externally"
        },
        {
          "keyword": "And",
          "text": "I refresh or reload the attachments view"
        },
        {
          "keyword": "Then",
          "text": "the newly added documents should appear"
        },
        {
          "keyword": "And",
          "text": "existing documents should remain visible"
        }
      ]
    }
  ],
  "gherkin_content": "Feature: View Compliance Record Attachments\n  Alliant Admins can access and view all COI documents attached to compliance records through the Attachments button\n\n  Background:\n    Given I am on the insurer claims dashboard\n    And I am logged in as an Alliant Admin\n    And there are compliance records in the list view\n\n  @smoke @positive\n  Scenario: Successfully view attachments through paperclip icon\n    Given I can see a compliance record with the paperclip icon visible\n    When I click on the paperclip icon\n    Then the Entity Viewer should open\n    And I should see the Attachments tab displayed\n\n  @positive\n  Scenario: View manually attached documents in Entity Viewer\n    Given a compliance record has manually attached documents\n    When I click the paperclip icon for that record\n    Then the Entity Viewer should open\n    And I should see all manually attached documents in the Attachments tab\n\n  @positive\n  Scenario: View Focus-fetched documents in Entity Viewer\n    Given a compliance record has documents fetched from Focus\n    When I click the paperclip icon for that record\n    Then the Entity Viewer should open\n    And I should see all Focus-fetched documents in the Attachments tab\n\n  @positive\n  Scenario: View both manual and Focus documents together\n    Given a compliance record has both manually attached and Focus-fetched documents\n    When I click the paperclip icon for that record\n    Then the Entity Viewer should open\n    And I should see all documents from both sources in the Attachments tab\n    And the documents should be clearly identified by their source\n\n  @positive\n  Scenario: Close Entity Viewer after viewing attachments\n    Given I have the Entity Viewer open showing attachments\n    When I click the close button\n    Then the Entity Viewer should close\n    And I should return to the compliance records list view\n\n  @positive @navigation\n  Scenario: Navigate between different attachment tabs\n    Given I have the Entity Viewer open with the Attachments tab active\n    When I navigate to other tabs within the Entity Viewer\n    And I return to the Attachments tab\n    Then all attachment documents should still be visible\n    And the attachment data should remain intact\n\n  @negative\n  Scenario: Handle records with no attachments\n    Given a compliance record has no attached documents\n    When I click the paperclip icon for that record\n    Then the Entity Viewer should open\n    And I should see an empty Attachments tab\n    And I should see a message indicating no attachments are available\n\n  @negative\n  Scenario: Handle missing paperclip icon for records without attachments\n    Given a compliance record has no documents attached\n    Then the paperclip icon should not be visible for that record\n    And the paperclip icon should be disabled or grayed out\n\n  @negative\n  Scenario: Handle Entity Viewer loading errors\n    Given there is a network connectivity issue\n    When I click the paperclip icon\n    Then I should see an error message\n    And the system should provide guidance on how to proceed\n\n  @negative\n  Scenario: Handle corrupted attachment data\n    Given a compliance record has corrupted attachment data\n    When I click the paperclip icon for that record\n    Then the Entity Viewer should open\n    And I should see an error message for the corrupted attachments\n    But valid attachments should still be displayed\n\n  @edge-case @boundary\n  Scenario: View attachments with maximum number of documents\n    Given a compliance record has the maximum allowed number of attachments\n    When I click the paperclip icon\n    Then the Entity Viewer should open\n    And all attachments should load and display properly\n    And the interface should remain responsive\n\n  @edge-case\n  Scenario: View attachments with very large file sizes\n    Given a compliance record has attachments with very large file sizes\n    When I click the paperclip icon\n    Then the Entity Viewer should open\n    And I should see loading indicators for large files\n    And the attachments should eventually load completely\n\n  @edge-case\n  Scenario: View attachments with special characters in filenames\n    Given a compliance record has attachments with special characters in filenames\n    When I click the paperclip icon\n    Then the Entity Viewer should open\n    And all filenames should display correctly without encoding issues\n    And the attachments should be accessible\n\n  @alternative-flow\n  Scenario: Open multiple Entity Viewers simultaneously\n    Given I have one Entity Viewer already open\n    When I click the paperclip icon on a different compliance record\n    Then the system should either open a new Entity Viewer\n    And replace the current Entity Viewer with the new record's attachments\n    And the behavior should be consistent and user-friendly\n\n  @alternative-flow\n  Scenario: Refresh attachments data while Entity Viewer is open\n    Given I have the Entity Viewer open showing attachments\n    When new documents are added to the compliance record externally\n    And I refresh or reload the attachments view\n    Then the newly added documents should appear\n    And existing documents should remain visible"
}
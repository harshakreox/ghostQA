{
  "id": "feature_1764931992.810053",
  "name": "View Compliance Attachments - Driver/Non-Driver",
  "description": "Users can view, download, upload, edit, and delete COI documents from their compliance record",
  "created_at": "2025-12-05T16:23:12.812072",
  "updated_at": "2025-12-05T16:23:17.977924",
  "project_id": "ce1a8cc0-da85-48e2-b349-7bf9311e023f",
  "background": [
    {
      "keyword": "Given",
      "text": "I am on the application"
    },
    {
      "keyword": "And",
      "text": "I am logged in as a driver or non-driver"
    },
    {
      "keyword": "And",
      "text": "I am on my compliance record detail page"
    }
  ],
  "scenarios": [
    {
      "name": "User successfully views Attachments section on compliance record detail page",
      "tags": [
        "@smoke",
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have a compliance record with attachments"
        },
        {
          "keyword": "When",
          "text": "I navigate to my compliance record detail page"
        },
        {
          "keyword": "Then",
          "text": "I should see an \"Attachments\" section"
        },
        {
          "keyword": "And",
          "text": "the section should be clearly visible and accessible"
        }
      ]
    },
    {
      "name": "User successfully views all attached COI documents",
      "tags": [
        "@positive",
        "@core"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have COI documents both manually attached and fetched from Focus"
        },
        {
          "keyword": "When",
          "text": "I view the \"Attachments\" section"
        },
        {
          "keyword": "Then",
          "text": "I should see all manually attached COI documents"
        },
        {
          "keyword": "And",
          "text": "I should see all COI documents fetched from Focus"
        },
        {
          "keyword": "And",
          "text": "each document should display relevant information"
        }
      ]
    },
    {
      "name": "User successfully downloads a COI document",
      "tags": [
        "@positive",
        "@download"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have COI documents in my attachments"
        },
        {
          "keyword": "When",
          "text": "I select a document to download"
        },
        {
          "keyword": "And",
          "text": "I click the \"Download\" button"
        },
        {
          "keyword": "Then",
          "text": "the document should begin downloading"
        },
        {
          "keyword": "And",
          "text": "I should be able to access the downloaded file"
        }
      ]
    },
    {
      "name": "User successfully uploads a new COI document",
      "tags": [
        "@positive",
        "@upload"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am in the \"Attachments\" section"
        },
        {
          "keyword": "When",
          "text": "I click the \"Upload\" button"
        },
        {
          "keyword": "And",
          "text": "I select a valid COI document file"
        },
        {
          "keyword": "And",
          "text": "I confirm the upload"
        },
        {
          "keyword": "Then",
          "text": "the document should be successfully uploaded"
        },
        {
          "keyword": "And",
          "text": "I should see the new document in my attachments list"
        }
      ]
    },
    {
      "name": "User successfully edits an existing attachment",
      "tags": [
        "@positive",
        "@edit"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have an existing COI document attachment"
        },
        {
          "keyword": "When",
          "text": "I select the document to edit"
        },
        {
          "keyword": "And",
          "text": "I click the \"Edit\" button"
        },
        {
          "keyword": "And",
          "text": "I make valid changes to the document properties"
        },
        {
          "keyword": "And",
          "text": "I save the changes"
        },
        {
          "keyword": "Then",
          "text": "the document should be successfully updated"
        },
        {
          "keyword": "And",
          "text": "I should see the updated information in the attachments list"
        }
      ]
    },
    {
      "name": "User successfully deletes an attachment",
      "tags": [
        "@positive",
        "@delete"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have a COI document attachment that I can delete"
        },
        {
          "keyword": "When",
          "text": "I select the document to delete"
        },
        {
          "keyword": "And",
          "text": "I click the \"Delete\" button"
        },
        {
          "keyword": "And",
          "text": "I confirm the deletion"
        },
        {
          "keyword": "Then",
          "text": "the document should be removed from my attachments"
        },
        {
          "keyword": "And",
          "text": "I should see a confirmation message"
        }
      ]
    },
    {
      "name": "Upload fails with invalid file format",
      "tags": [
        "@negative",
        "@validation"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am in the \"Attachments\" section"
        },
        {
          "keyword": "When",
          "text": "I click the \"Upload\" button"
        },
        {
          "keyword": "And",
          "text": "I select a file with invalid format"
        },
        {
          "keyword": "And",
          "text": "I attempt to upload the file"
        },
        {
          "keyword": "Then",
          "text": "I should see an error message about invalid file format"
        },
        {
          "keyword": "And",
          "text": "the file should not be uploaded"
        }
      ]
    },
    {
      "name": "Upload fails when file size exceeds limit",
      "tags": [
        "@negative",
        "@validation"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am attempting to upload a COI document"
        },
        {
          "keyword": "When",
          "text": "I select a file that exceeds the maximum file size limit"
        },
        {
          "keyword": "And",
          "text": "I attempt to upload the file"
        },
        {
          "keyword": "Then",
          "text": "I should see an error message about file size limit"
        },
        {
          "keyword": "And",
          "text": "the upload should be prevented"
        }
      ]
    },
    {
      "name": "Download fails for corrupted document",
      "tags": [
        "@negative",
        "@error"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have a corrupted document in my attachments"
        },
        {
          "keyword": "When",
          "text": "I attempt to download the corrupted document"
        },
        {
          "keyword": "Then",
          "text": "I should see an error message indicating the download failed"
        },
        {
          "keyword": "And",
          "text": "I should be notified about the document issue"
        }
      ]
    },
    {
      "name": "Delete operation fails due to system restrictions",
      "tags": [
        "@negative",
        "@authorization"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have a COI document that cannot be deleted due to system restrictions"
        },
        {
          "keyword": "When",
          "text": "I attempt to delete the restricted document"
        },
        {
          "keyword": "And",
          "text": "I confirm the deletion attempt"
        },
        {
          "keyword": "Then",
          "text": "I should see an error message explaining why deletion is not allowed"
        },
        {
          "keyword": "And",
          "text": "the document should remain in my attachments"
        }
      ]
    },
    {
      "name": "User handles maximum number of allowed attachments",
      "tags": [
        "@edge-case",
        "@boundary"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have reached the maximum number of allowed attachments"
        },
        {
          "keyword": "When",
          "text": "I attempt to upload an additional document"
        },
        {
          "keyword": "Then",
          "text": "I should see a message about reaching the attachment limit"
        },
        {
          "keyword": "And",
          "text": "the system should prevent the upload or suggest removing existing attachments"
        }
      ]
    },
    {
      "name": "User views attachments when no documents are available",
      "tags": [
        "@edge-case",
        "@empty-state"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have no COI documents attached to my compliance record"
        },
        {
          "keyword": "When",
          "text": "I view the \"Attachments\" section"
        },
        {
          "keyword": "Then",
          "text": "I should see an empty state message"
        },
        {
          "keyword": "And",
          "text": "I should see options to upload my first document"
        }
      ]
    },
    {
      "name": "User manages attachments with minimum file size",
      "tags": [
        "@edge-case",
        "@boundary"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have a valid COI document at minimum acceptable file size"
        },
        {
          "keyword": "When",
          "text": "I upload the minimum size document"
        },
        {
          "keyword": "Then",
          "text": "the document should be accepted and uploaded successfully"
        },
        {
          "keyword": "And",
          "text": "I should be able to view and download the document"
        }
      ]
    },
    {
      "name": "Alternative upload method through drag and drop",
      "tags": [
        "@alternative",
        "@upload"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am in the \"Attachments\" section with drag and drop functionality available"
        },
        {
          "keyword": "When",
          "text": "I drag a valid COI document file to the upload area"
        },
        {
          "keyword": "And",
          "text": "I drop the file in the designated zone"
        },
        {
          "keyword": "Then",
          "text": "the document should be uploaded successfully"
        },
        {
          "keyword": "And",
          "text": "I should see the document appear in my attachments list"
        }
      ]
    }
  ],
  "gherkin_content": "Feature: View Compliance Attachments - Driver/Non-Driver\n  Users can view, download, upload, edit, and delete COI documents from their compliance record\n\n  Background:\n    Given I am on the application\n    And I am logged in as a driver or non-driver\n    And I am on my compliance record detail page\n\n  @smoke @positive\n  Scenario: User successfully views Attachments section on compliance record detail page\n    Given I have a compliance record with attachments\n    When I navigate to my compliance record detail page\n    Then I should see an \"Attachments\" section\n    And the section should be clearly visible and accessible\n\n  @positive @core\n  Scenario: User successfully views all attached COI documents\n    Given I have COI documents both manually attached and fetched from Focus\n    When I view the \"Attachments\" section\n    Then I should see all manually attached COI documents\n    And I should see all COI documents fetched from Focus\n    And each document should display relevant information\n\n  @positive @download\n  Scenario: User successfully downloads a COI document\n    Given I have COI documents in my attachments\n    When I select a document to download\n    And I click the \"Download\" button\n    Then the document should begin downloading\n    And I should be able to access the downloaded file\n\n  @positive @upload\n  Scenario: User successfully uploads a new COI document\n    Given I am in the \"Attachments\" section\n    When I click the \"Upload\" button\n    And I select a valid COI document file\n    And I confirm the upload\n    Then the document should be successfully uploaded\n    And I should see the new document in my attachments list\n\n  @positive @edit\n  Scenario: User successfully edits an existing attachment\n    Given I have an existing COI document attachment\n    When I select the document to edit\n    And I click the \"Edit\" button\n    And I make valid changes to the document properties\n    And I save the changes\n    Then the document should be successfully updated\n    And I should see the updated information in the attachments list\n\n  @positive @delete\n  Scenario: User successfully deletes an attachment\n    Given I have a COI document attachment that I can delete\n    When I select the document to delete\n    And I click the \"Delete\" button\n    And I confirm the deletion\n    Then the document should be removed from my attachments\n    And I should see a confirmation message\n\n  @negative @validation\n  Scenario: Upload fails with invalid file format\n    Given I am in the \"Attachments\" section\n    When I click the \"Upload\" button\n    And I select a file with invalid format\n    And I attempt to upload the file\n    Then I should see an error message about invalid file format\n    And the file should not be uploaded\n\n  @negative @validation\n  Scenario: Upload fails when file size exceeds limit\n    Given I am attempting to upload a COI document\n    When I select a file that exceeds the maximum file size limit\n    And I attempt to upload the file\n    Then I should see an error message about file size limit\n    And the upload should be prevented\n\n  @negative @error\n  Scenario: Download fails for corrupted document\n    Given I have a corrupted document in my attachments\n    When I attempt to download the corrupted document\n    Then I should see an error message indicating the download failed\n    And I should be notified about the document issue\n\n  @negative @authorization\n  Scenario: Delete operation fails due to system restrictions\n    Given I have a COI document that cannot be deleted due to system restrictions\n    When I attempt to delete the restricted document\n    And I confirm the deletion attempt\n    Then I should see an error message explaining why deletion is not allowed\n    And the document should remain in my attachments\n\n  @edge-case @boundary\n  Scenario: User handles maximum number of allowed attachments\n    Given I have reached the maximum number of allowed attachments\n    When I attempt to upload an additional document\n    Then I should see a message about reaching the attachment limit\n    And the system should prevent the upload or suggest removing existing attachments\n\n  @edge-case @empty-state\n  Scenario: User views attachments when no documents are available\n    Given I have no COI documents attached to my compliance record\n    When I view the \"Attachments\" section\n    Then I should see an empty state message\n    And I should see options to upload my first document\n\n  @edge-case @boundary\n  Scenario: User manages attachments with minimum file size\n    Given I have a valid COI document at minimum acceptable file size\n    When I upload the minimum size document\n    Then the document should be accepted and uploaded successfully\n    And I should be able to view and download the document\n\n  @alternative @upload\n  Scenario: Alternative upload method through drag and drop\n    Given I am in the \"Attachments\" section with drag and drop functionality available\n    When I drag a valid COI document file to the upload area\n    And I drop the file in the designated zone\n    Then the document should be uploaded successfully\n    And I should see the document appear in my attachments list"
}
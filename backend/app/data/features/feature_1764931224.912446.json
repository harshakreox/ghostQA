{
  "id": "feature_1764931224.912446",
  "name": "Compliance Dashboard - Client Admin View",
  "description": "Client Admin dashboard for monitoring certificate of insurance compliance with company-filtered metrics and records",
  "created_at": "2025-12-05T16:10:24.912446",
  "updated_at": "2025-12-05T16:10:29.230597",
  "project_id": "ce1a8cc0-da85-48e2-b349-7bf9311e023f",
  "background": [
    {
      "keyword": "Given",
      "text": "I am on the application"
    },
    {
      "keyword": "And",
      "text": "I am logged in as a Client Admin user"
    }
  ],
  "scenarios": [
    {
      "name": "Display compliance dashboard with correct header and company name",
      "tags": [
        "@smoke",
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I navigate to the compliance dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see the page header \"Compliance Dashboard - My Company Name\""
        },
        {
          "keyword": "And",
          "text": "I should see the subtitle \"Manage and track certificate of insurance compliance\""
        }
      ]
    },
    {
      "name": "Display three summary metric cards with company-filtered data",
      "tags": [
        "@positive",
        "@metrics"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the compliance dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see the \"Compliance Rate\" metric card"
        },
        {
          "keyword": "And",
          "text": "I should see the \"Expiring Within 30 Days\" metric card"
        },
        {
          "keyword": "And",
          "text": "I should see the \"Expired Certifications\" metric card"
        },
        {
          "keyword": "And",
          "text": "all metric cards should display data for my company only"
        }
      ]
    },
    {
      "name": "Display compliance records section with company-only records",
      "tags": [
        "@positive",
        "@records"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the compliance dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see the \"Compliance Records\" section"
        },
        {
          "keyword": "And",
          "text": "I should see a list view of compliance records"
        },
        {
          "keyword": "And",
          "text": "all displayed records should belong to my company only"
        }
      ]
    },
    {
      "name": "Verify Requirements tab is hidden for Client Admin",
      "tags": [
        "@positive",
        "@access-control"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the compliance dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should not see a \"Requirements\" tab"
        },
        {
          "keyword": "And",
          "text": "I should only see tabs available to Client Admin users"
        }
      ]
    },
    {
      "name": "Verify no manual Add Record button is displayed",
      "tags": [
        "@positive",
        "@access-control"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the compliance dashboard"
        },
        {
          "keyword": "When",
          "text": "I view the compliance records section"
        },
        {
          "keyword": "Then",
          "text": "I should not see an \"Add Record\" button"
        },
        {
          "keyword": "And",
          "text": "I should only see auto-generated compliance records"
        }
      ]
    },
    {
      "name": "Calculate compliance rate correctly for company records",
      "tags": [
        "@positive",
        "@calculation"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has compliance records with various statuses"
        },
        {
          "keyword": "When",
          "text": "I view the compliance rate metric card"
        },
        {
          "keyword": "Then",
          "text": "I should see the percentage calculated from compliant records divided by total company records"
        },
        {
          "keyword": "And",
          "text": "the calculation should only include my company's records"
        }
      ]
    },
    {
      "name": "Display records expiring within 30 days for company only",
      "tags": [
        "@positive",
        "@expiration"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has records with policy dates within the next 30 days"
        },
        {
          "keyword": "When",
          "text": "I view the \"Expiring Within 30 Days\" metric card"
        },
        {
          "keyword": "Then",
          "text": "I should see the count of my company's records expiring within 30 days"
        },
        {
          "keyword": "And",
          "text": "records from other companies should not be included in the count"
        }
      ]
    },
    {
      "name": "Handle dashboard with no compliance records for company",
      "tags": [
        "@edge-case",
        "@empty-state"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has no compliance records"
        },
        {
          "keyword": "When",
          "text": "I view the compliance dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see zero values in all metric cards"
        },
        {
          "keyword": "And",
          "text": "I should see an empty state message in the compliance records section"
        }
      ]
    },
    {
      "name": "Display expired certifications count for company only",
      "tags": [
        "@positive",
        "@expired"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has records with past policy effective dates"
        },
        {
          "keyword": "When",
          "text": "I view the \"Expired Certifications\" metric card"
        },
        {
          "keyword": "Then",
          "text": "I should see the count of my company's expired certifications"
        },
        {
          "keyword": "And",
          "text": "only records where policy date is before current date should be counted"
        }
      ]
    },
    {
      "name": "Verify company name column shows only my company",
      "tags": [
        "@positive",
        "@filtering"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing the compliance records list"
        },
        {
          "keyword": "When",
          "text": "I examine the company name column"
        },
        {
          "keyword": "Then",
          "text": "I should see only my company name in all records"
        },
        {
          "keyword": "And",
          "text": "no other company names should appear in the list"
        }
      ]
    },
    {
      "name": "Verify cannot filter by other companies",
      "tags": [
        "@negative",
        "@access-control"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the compliance records list view"
        },
        {
          "keyword": "When",
          "text": "I look for company filter options"
        },
        {
          "keyword": "Then",
          "text": "I should not see options to filter by other companies"
        },
        {
          "keyword": "And",
          "text": "any company filter should only show my company"
        }
      ]
    },
    {
      "name": "Handle dashboard load error gracefully",
      "tags": [
        "@negative",
        "@error-handling"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "there is an error loading dashboard data"
        },
        {
          "keyword": "When",
          "text": "I navigate to the compliance dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see an appropriate error message"
        },
        {
          "keyword": "And",
          "text": "I should have an option to retry loading the data"
        }
      ]
    },
    {
      "name": "Handle network timeout while loading metrics",
      "tags": [
        "@negative",
        "@error-handling"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "the network request for metrics times out"
        },
        {
          "keyword": "When",
          "text": "I access the compliance dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see loading indicators for the metric cards"
        },
        {
          "keyword": "And",
          "text": "I should eventually see a timeout error message"
        }
      ]
    },
    {
      "name": "Verify metrics update when new compliance record is added via API",
      "tags": [
        "@edge-case",
        "@real-time"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing the compliance dashboard"
        },
        {
          "keyword": "When",
          "text": "a new compliance record is created via API for my company"
        },
        {
          "keyword": "And",
          "text": "I refresh the dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see updated metric values reflecting the new record"
        },
        {
          "keyword": "And",
          "text": "the new record should appear in the compliance records list"
        }
      ]
    },
    {
      "name": "Handle boundary case with exactly 30 days until expiration",
      "tags": [
        "@edge-case",
        "@boundary"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has a record with policy effective date exactly 30 days from today"
        },
        {
          "keyword": "When",
          "text": "I view the \"Expiring Within 30 Days\" metric card"
        },
        {
          "keyword": "Then",
          "text": "the record should be included in the count"
        },
        {
          "keyword": "And",
          "text": "the metric should correctly count records at the 30-day boundary"
        }
      ]
    }
  ],
  "gherkin_content": "Feature: Compliance Dashboard - Client Admin View\n  Client Admin dashboard for monitoring certificate of insurance compliance with company-filtered metrics and records\n\n  Background:\n    Given I am on the application\n    And I am logged in as a Client Admin user\n\n  @smoke @positive\n  Scenario: Display compliance dashboard with correct header and company name\n    Given I navigate to the compliance dashboard\n    Then I should see the page header \"Compliance Dashboard - My Company Name\"\n    And I should see the subtitle \"Manage and track certificate of insurance compliance\"\n\n  @positive @metrics\n  Scenario: Display three summary metric cards with company-filtered data\n    Given I am on the compliance dashboard\n    Then I should see the \"Compliance Rate\" metric card\n    And I should see the \"Expiring Within 30 Days\" metric card\n    And I should see the \"Expired Certifications\" metric card\n    And all metric cards should display data for my company only\n\n  @positive @records\n  Scenario: Display compliance records section with company-only records\n    Given I am on the compliance dashboard\n    Then I should see the \"Compliance Records\" section\n    And I should see a list view of compliance records\n    And all displayed records should belong to my company only\n\n  @positive @access-control\n  Scenario: Verify Requirements tab is hidden for Client Admin\n    Given I am on the compliance dashboard\n    Then I should not see a \"Requirements\" tab\n    And I should only see tabs available to Client Admin users\n\n  @positive @access-control\n  Scenario: Verify no manual Add Record button is displayed\n    Given I am on the compliance dashboard\n    When I view the compliance records section\n    Then I should not see an \"Add Record\" button\n    And I should only see auto-generated compliance records\n\n  @positive @calculation\n  Scenario: Calculate compliance rate correctly for company records\n    Given my company has compliance records with various statuses\n    When I view the compliance rate metric card\n    Then I should see the percentage calculated from compliant records divided by total company records\n    And the calculation should only include my company's records\n\n  @positive @expiration\n  Scenario: Display records expiring within 30 days for company only\n    Given my company has records with policy dates within the next 30 days\n    When I view the \"Expiring Within 30 Days\" metric card\n    Then I should see the count of my company's records expiring within 30 days\n    And records from other companies should not be included in the count\n\n  @edge-case @empty-state\n  Scenario: Handle dashboard with no compliance records for company\n    Given my company has no compliance records\n    When I view the compliance dashboard\n    Then I should see zero values in all metric cards\n    And I should see an empty state message in the compliance records section\n\n  @positive @expired\n  Scenario: Display expired certifications count for company only\n    Given my company has records with past policy effective dates\n    When I view the \"Expired Certifications\" metric card\n    Then I should see the count of my company's expired certifications\n    And only records where policy date is before current date should be counted\n\n  @positive @filtering\n  Scenario: Verify company name column shows only my company\n    Given I am viewing the compliance records list\n    When I examine the company name column\n    Then I should see only my company name in all records\n    And no other company names should appear in the list\n\n  @negative @access-control\n  Scenario: Verify cannot filter by other companies\n    Given I am on the compliance records list view\n    When I look for company filter options\n    Then I should not see options to filter by other companies\n    And any company filter should only show my company\n\n  @negative @error-handling\n  Scenario: Handle dashboard load error gracefully\n    Given there is an error loading dashboard data\n    When I navigate to the compliance dashboard\n    Then I should see an appropriate error message\n    And I should have an option to retry loading the data\n\n  @negative @error-handling\n  Scenario: Handle network timeout while loading metrics\n    Given the network request for metrics times out\n    When I access the compliance dashboard\n    Then I should see loading indicators for the metric cards\n    And I should eventually see a timeout error message\n\n  @edge-case @real-time\n  Scenario: Verify metrics update when new compliance record is added via API\n    Given I am viewing the compliance dashboard\n    When a new compliance record is created via API for my company\n    And I refresh the dashboard\n    Then I should see updated metric values reflecting the new record\n    And the new record should appear in the compliance records list\n\n  @edge-case @boundary\n  Scenario: Handle boundary case with exactly 30 days until expiration\n    Given my company has a record with policy effective date exactly 30 days from today\n    When I view the \"Expiring Within 30 Days\" metric card\n    Then the record should be included in the count\n    And the metric should correctly count records at the 30-day boundary"
}
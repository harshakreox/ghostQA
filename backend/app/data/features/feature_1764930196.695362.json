{
  "id": "feature_1764930196.695362",
  "name": "View Compliance Record Attachments",
  "description": "Back Office Users can access and view all COI documents attached to compliance records through the Entity Viewer interface",
  "created_at": "2025-12-05T15:53:16.695362",
  "updated_at": "2025-12-05T15:53:24.504080",
  "project_id": "ce1a8cc0-da85-48e2-b349-7bf9311e023f",
  "background": [
    {
      "keyword": "Given",
      "text": "I am on the insurer claims dashboard"
    },
    {
      "keyword": "And",
      "text": "I am logged in as a Back Office User"
    },
    {
      "keyword": "And",
      "text": "there are compliance records visible in the list view"
    }
  ],
  "scenarios": [
    {
      "name": "Successfully open Entity Viewer from attachments button",
      "tags": [
        "@smoke",
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I can see compliance records with attachment indicators"
        },
        {
          "keyword": "When",
          "text": "I click the attachments button with paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "the Attachments tab should be displayed"
        },
        {
          "keyword": "And",
          "text": "I should see all attached documents"
        }
      ]
    },
    {
      "name": "View manually attached documents in Entity Viewer",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has manually attached documents"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see all manually attached documents in the Attachments tab"
        },
        {
          "keyword": "And",
          "text": "the documents should be clearly identified as manually attached"
        }
      ]
    },
    {
      "name": "View Focus-fetched documents in Entity Viewer",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has documents fetched from Focus"
        },
        {
          "keyword": "When",
          "text": "I click the attachments button for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should display"
        },
        {
          "keyword": "And",
          "text": "I should see all Focus-fetched documents"
        },
        {
          "keyword": "And",
          "text": "the documents should be identified as Focus-sourced"
        }
      ]
    },
    {
      "name": "View mixed document sources in Entity Viewer",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has both manually attached and Focus-fetched documents"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "I should see both manually attached documents and Focus-fetched documents"
        },
        {
          "keyword": "And",
          "text": "all documents should be clearly categorized by source"
        }
      ]
    },
    {
      "name": "Entity Viewer opens with Attachments tab active by default",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing the compliance records list"
        },
        {
          "keyword": "When",
          "text": "I click any attachments button with paperclip icon"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "the Attachments tab should be the active tab"
        },
        {
          "keyword": "And",
          "text": "I should not need to navigate to view the attachments"
        }
      ]
    },
    {
      "name": "Close Entity Viewer and return to list view",
      "tags": [
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "the Entity Viewer is open showing attachments"
        },
        {
          "keyword": "When",
          "text": "I close the Entity Viewer"
        },
        {
          "keyword": "Then",
          "text": "I should return to the compliance records list view"
        },
        {
          "keyword": "And",
          "text": "the list should maintain its previous state"
        }
      ]
    },
    {
      "name": "Handle records with no attachments",
      "tags": [
        "@negative",
        "@edge-case"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has no attached documents"
        },
        {
          "keyword": "When",
          "text": "I click the attachments button for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open"
        },
        {
          "keyword": "And",
          "text": "the Attachments tab should show an empty state message"
        },
        {
          "keyword": "And",
          "text": "I should see a message indicating no attachments are available"
        }
      ]
    },
    {
      "name": "Handle paperclip icon when not visible or disabled",
      "tags": [
        "@negative"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing the compliance records list"
        },
        {
          "keyword": "When",
          "text": "there are no records with attachments available"
        },
        {
          "keyword": "Then",
          "text": "the paperclip icons should not be clickable"
        },
        {
          "keyword": "And",
          "text": "attempting to interact should not open Entity Viewer"
        }
      ]
    },
    {
      "name": "Handle Entity Viewer loading failure",
      "tags": [
        "@negative"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I click the attachments button for a record"
        },
        {
          "keyword": "When",
          "text": "the Entity Viewer fails to load properly"
        },
        {
          "keyword": "Then",
          "text": "I should see an appropriate error message"
        },
        {
          "keyword": "And",
          "text": "I should be able to retry or return to the list view"
        }
      ]
    },
    {
      "name": "Handle attachment loading errors in Entity Viewer",
      "tags": [
        "@negative"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "the Entity Viewer is open"
        },
        {
          "keyword": "When",
          "text": "some attachments fail to load from Focus or manual sources"
        },
        {
          "keyword": "Then",
          "text": "I should see error indicators for failed attachments"
        },
        {
          "keyword": "And",
          "text": "successfully loaded attachments should still be visible"
        },
        {
          "keyword": "And",
          "text": "I should see retry options for failed attachments"
        }
      ]
    },
    {
      "name": "Navigate Entity Viewer with large number of attachments",
      "tags": [
        "@edge-case"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "a compliance record has many attached documents"
        },
        {
          "keyword": "When",
          "text": "I click the paperclip icon for that record"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open with proper pagination or scrolling"
        },
        {
          "keyword": "And",
          "text": "all attachments should be accessible"
        },
        {
          "keyword": "And",
          "text": "performance should remain acceptable"
        }
      ]
    },
    {
      "name": "Entity Viewer maintains functionality across different record types",
      "tags": [
        "@edge-case"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have compliance records of different types in the list"
        },
        {
          "keyword": "When",
          "text": "I click attachments buttons for various record types"
        },
        {
          "keyword": "Then",
          "text": "the Entity Viewer should open consistently for each type"
        },
        {
          "keyword": "And",
          "text": "the Attachments tab should function properly regardless of record type"
        }
      ]
    },
    {
      "name": "Verify paperclip icon visual states and accessibility",
      "tags": [
        "@positive",
        "@accessibility"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing compliance records with various attachment states"
        },
        {
          "keyword": "When",
          "text": "I observe the paperclip icons"
        },
        {
          "keyword": "Then",
          "text": "icons should clearly indicate which records have attachments"
        },
        {
          "keyword": "And",
          "text": "the icons should be accessible via keyboard navigation"
        },
        {
          "keyword": "And",
          "text": "tooltips or labels should provide clear context"
        }
      ]
    }
  ],
  "gherkin_content": "Feature: View Compliance Record Attachments\n  Back Office Users can access and view all COI documents attached to compliance records through the Entity Viewer interface\n\n  Background:\n    Given I am on the insurer claims dashboard\n    And I am logged in as a Back Office User\n    And there are compliance records visible in the list view\n\n  @smoke @positive\n  Scenario: Successfully open Entity Viewer from attachments button\n    Given I can see compliance records with attachment indicators\n    When I click the attachments button with paperclip icon\n    Then the Entity Viewer should open\n    And the Attachments tab should be displayed\n    And I should see all attached documents\n\n  @positive\n  Scenario: View manually attached documents in Entity Viewer\n    Given a compliance record has manually attached documents\n    When I click the paperclip icon for that record\n    Then the Entity Viewer should open\n    And I should see all manually attached documents in the Attachments tab\n    And the documents should be clearly identified as manually attached\n\n  @positive\n  Scenario: View Focus-fetched documents in Entity Viewer\n    Given a compliance record has documents fetched from Focus\n    When I click the attachments button for that record\n    Then the Entity Viewer should display\n    And I should see all Focus-fetched documents\n    And the documents should be identified as Focus-sourced\n\n  @positive\n  Scenario: View mixed document sources in Entity Viewer\n    Given a compliance record has both manually attached and Focus-fetched documents\n    When I click the paperclip icon\n    Then the Entity Viewer should open\n    And I should see both manually attached documents and Focus-fetched documents\n    And all documents should be clearly categorized by source\n\n  @positive\n  Scenario: Entity Viewer opens with Attachments tab active by default\n    Given I am viewing the compliance records list\n    When I click any attachments button with paperclip icon\n    Then the Entity Viewer should open\n    And the Attachments tab should be the active tab\n    And I should not need to navigate to view the attachments\n\n  @positive\n  Scenario: Close Entity Viewer and return to list view\n    Given the Entity Viewer is open showing attachments\n    When I close the Entity Viewer\n    Then I should return to the compliance records list view\n    And the list should maintain its previous state\n\n  @negative @edge-case\n  Scenario: Handle records with no attachments\n    Given a compliance record has no attached documents\n    When I click the attachments button for that record\n    Then the Entity Viewer should open\n    And the Attachments tab should show an empty state message\n    And I should see a message indicating no attachments are available\n\n  @negative\n  Scenario: Handle paperclip icon when not visible or disabled\n    Given I am viewing the compliance records list\n    When there are no records with attachments available\n    Then the paperclip icons should not be clickable\n    And attempting to interact should not open Entity Viewer\n\n  @negative\n  Scenario: Handle Entity Viewer loading failure\n    Given I click the attachments button for a record\n    When the Entity Viewer fails to load properly\n    Then I should see an appropriate error message\n    And I should be able to retry or return to the list view\n\n  @negative\n  Scenario: Handle attachment loading errors in Entity Viewer\n    Given the Entity Viewer is open\n    When some attachments fail to load from Focus or manual sources\n    Then I should see error indicators for failed attachments\n    And successfully loaded attachments should still be visible\n    And I should see retry options for failed attachments\n\n  @edge-case\n  Scenario: Navigate Entity Viewer with large number of attachments\n    Given a compliance record has many attached documents\n    When I click the paperclip icon for that record\n    Then the Entity Viewer should open with proper pagination or scrolling\n    And all attachments should be accessible\n    And performance should remain acceptable\n\n  @edge-case\n  Scenario: Entity Viewer maintains functionality across different record types\n    Given I have compliance records of different types in the list\n    When I click attachments buttons for various record types\n    Then the Entity Viewer should open consistently for each type\n    And the Attachments tab should function properly regardless of record type\n\n  @positive @accessibility\n  Scenario: Verify paperclip icon visual states and accessibility\n    Given I am viewing compliance records with various attachment states\n    When I observe the paperclip icons\n    Then icons should clearly indicate which records have attachments\n    And the icons should be accessible via keyboard navigation\n    And tooltips or labels should provide clear context"
}
{
  "id": "feature_1764931539.742472",
  "name": "Export Compliance Records for Client Admin",
  "description": "Client Admin can download filtered compliance records data for their specific company in Excel format",
  "created_at": "2025-12-05T16:15:39.742472",
  "updated_at": "2025-12-05T16:15:42.230276",
  "project_id": "ce1a8cc0-da85-48e2-b349-7bf9311e023f",
  "background": [
    {
      "keyword": "Given",
      "text": "I am on the insurer claims dashboard"
    },
    {
      "keyword": "And",
      "text": "I am logged in as a Client Admin user"
    },
    {
      "keyword": "And",
      "text": "my company has compliance records available"
    }
  ],
  "scenarios": [
    {
      "name": "Client Admin successfully exports company compliance records",
      "tags": [
        "@smoke",
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the compliance records page"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "I should see a download confirmation message"
        },
        {
          "keyword": "And",
          "text": "a file should be downloaded with format \"COI_Compliance_Records_{CompanyName}_YYYY-MM-DD.xlsx\""
        },
        {
          "keyword": "And",
          "text": "the file should contain only my company's compliance records"
        }
      ]
    },
    {
      "name": "Export button is visible and enabled for Client Admin",
      "tags": [
        "@positive",
        "@ui"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing the compliance records dashboard"
        },
        {
          "keyword": "Then",
          "text": "I should see the \"Export\" button"
        },
        {
          "keyword": "And",
          "text": "the \"Export\" button should be enabled"
        },
        {
          "keyword": "And",
          "text": "the \"Export\" button should be clickable"
        }
      ]
    },
    {
      "name": "Export functionality works with filtered compliance data",
      "tags": [
        "@positive",
        "@data-filtering"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have applied filters to the compliance records"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "the exported file should contain only the filtered records"
        },
        {
          "keyword": "And",
          "text": "the records should belong only to my company"
        },
        {
          "keyword": "And",
          "text": "the file format should be Excel xlsx"
        }
      ]
    },
    {
      "name": "Export generates correct filename with current date",
      "tags": [
        "@positive",
        "@file-naming"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am ready to export compliance records"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "the downloaded file name should include my company name"
        },
        {
          "keyword": "And",
          "text": "the file name should include today's date in YYYY-MM-DD format"
        },
        {
          "keyword": "And",
          "text": "the file name should start with \"COI_Compliance_Records\""
        },
        {
          "keyword": "And",
          "text": "the file extension should be \".xlsx\""
        }
      ]
    },
    {
      "name": "Export works when company has large dataset",
      "tags": [
        "@positive",
        "@performance"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has a large number of compliance records"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "I should see a processing indicator"
        },
        {
          "keyword": "And",
          "text": "the export should complete successfully"
        },
        {
          "keyword": "And",
          "text": "all company records should be included in the download"
        }
      ]
    },
    {
      "name": "Export contains only Client Admin company data",
      "tags": [
        "@positive",
        "@data-isolation"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "there are multiple companies in the system"
        },
        {
          "keyword": "And",
          "text": "other companies have compliance records"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "the exported file should contain only my company's records"
        },
        {
          "keyword": "And",
          "text": "no other company's data should be included"
        }
      ]
    },
    {
      "name": "Export fails when user has insufficient permissions",
      "tags": [
        "@negative",
        "@authorization"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my user account permissions have been revoked"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "I should see an error message about insufficient permissions"
        },
        {
          "keyword": "And",
          "text": "no file should be downloaded"
        }
      ]
    },
    {
      "name": "Export fails when no compliance records exist",
      "tags": [
        "@negative",
        "@empty-data"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has no compliance records"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "I should see a message indicating no records to export"
        },
        {
          "keyword": "And",
          "text": "no file should be downloaded"
        }
      ]
    },
    {
      "name": "Export handles server connection errors gracefully",
      "tags": [
        "@negative",
        "@error-handling"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "there is a server connectivity issue"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "I should see an error message about connection failure"
        },
        {
          "keyword": "And",
          "text": "I should be prompted to try again"
        },
        {
          "keyword": "And",
          "text": "no corrupted file should be downloaded"
        }
      ]
    },
    {
      "name": "Export button disabled during processing",
      "tags": [
        "@negative",
        "@user-interaction"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have clicked the \"Export\" button"
        },
        {
          "keyword": "And",
          "text": "the export is in progress"
        },
        {
          "keyword": "When",
          "text": "I try to click the \"Export\" button again"
        },
        {
          "keyword": "Then",
          "text": "the \"Export\" button should be disabled"
        },
        {
          "keyword": "And",
          "text": "I should see a processing indicator"
        },
        {
          "keyword": "And",
          "text": "multiple downloads should not be triggered"
        }
      ]
    },
    {
      "name": "Export works with minimum dataset - single record",
      "tags": [
        "@edge-case",
        "@boundary"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has exactly one compliance record"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "the export should complete successfully"
        },
        {
          "keyword": "And",
          "text": "the downloaded file should contain the single record"
        },
        {
          "keyword": "And",
          "text": "the Excel file should be properly formatted"
        }
      ]
    },
    {
      "name": "Export handles maximum allowed records boundary",
      "tags": [
        "@edge-case",
        "@boundary"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company has the maximum number of allowed compliance records"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "the export should complete successfully"
        },
        {
          "keyword": "And",
          "text": "all records should be included in the download"
        },
        {
          "keyword": "And",
          "text": "the file should not be truncated"
        }
      ]
    },
    {
      "name": "Export works with special characters in company name",
      "tags": [
        "@edge-case",
        "@data-handling"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "my company name contains special characters"
        },
        {
          "keyword": "When",
          "text": "I click the \"Export\" button"
        },
        {
          "keyword": "Then",
          "text": "the file should download successfully"
        },
        {
          "keyword": "And",
          "text": "the company name in the filename should be properly formatted"
        },
        {
          "keyword": "And",
          "text": "special characters should be handled appropriately"
        }
      ]
    },
    {
      "name": "Alternative export access through context menu",
      "tags": [
        "@alternative-flow",
        "@ui"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing compliance records"
        },
        {
          "keyword": "When",
          "text": "I right-click on the records table"
        },
        {
          "keyword": "And",
          "text": "I select \"Export\" from the context menu"
        },
        {
          "keyword": "Then",
          "text": "the export should function the same as the Export button"
        },
        {
          "keyword": "And",
          "text": "the file should download with correct format"
        }
      ]
    }
  ],
  "gherkin_content": "Feature: Export Compliance Records for Client Admin\n  Client Admin can download filtered compliance records data for their specific company in Excel format\n\n  Background:\n    Given I am on the insurer claims dashboard\n    And I am logged in as a Client Admin user\n    And my company has compliance records available\n\n  @smoke @positive\n  Scenario: Client Admin successfully exports company compliance records\n    Given I am on the compliance records page\n    When I click the \"Export\" button\n    Then I should see a download confirmation message\n    And a file should be downloaded with format \"COI_Compliance_Records_{CompanyName}_YYYY-MM-DD.xlsx\"\n    And the file should contain only my company's compliance records\n\n  @positive @ui\n  Scenario: Export button is visible and enabled for Client Admin\n    Given I am viewing the compliance records dashboard\n    Then I should see the \"Export\" button\n    And the \"Export\" button should be enabled\n    And the \"Export\" button should be clickable\n\n  @positive @data-filtering\n  Scenario: Export functionality works with filtered compliance data\n    Given I have applied filters to the compliance records\n    When I click the \"Export\" button\n    Then the exported file should contain only the filtered records\n    And the records should belong only to my company\n    And the file format should be Excel xlsx\n\n  @positive @file-naming\n  Scenario: Export generates correct filename with current date\n    Given I am ready to export compliance records\n    When I click the \"Export\" button\n    Then the downloaded file name should include my company name\n    And the file name should include today's date in YYYY-MM-DD format\n    And the file name should start with \"COI_Compliance_Records\"\n    And the file extension should be \".xlsx\"\n\n  @positive @performance\n  Scenario: Export works when company has large dataset\n    Given my company has a large number of compliance records\n    When I click the \"Export\" button\n    Then I should see a processing indicator\n    And the export should complete successfully\n    And all company records should be included in the download\n\n  @positive @data-isolation\n  Scenario: Export contains only Client Admin company data\n    Given there are multiple companies in the system\n    And other companies have compliance records\n    When I click the \"Export\" button\n    Then the exported file should contain only my company's records\n    And no other company's data should be included\n\n  @negative @authorization\n  Scenario: Export fails when user has insufficient permissions\n    Given my user account permissions have been revoked\n    When I click the \"Export\" button\n    Then I should see an error message about insufficient permissions\n    And no file should be downloaded\n\n  @negative @empty-data\n  Scenario: Export fails when no compliance records exist\n    Given my company has no compliance records\n    When I click the \"Export\" button\n    Then I should see a message indicating no records to export\n    And no file should be downloaded\n\n  @negative @error-handling\n  Scenario: Export handles server connection errors gracefully\n    Given there is a server connectivity issue\n    When I click the \"Export\" button\n    Then I should see an error message about connection failure\n    And I should be prompted to try again\n    And no corrupted file should be downloaded\n\n  @negative @user-interaction\n  Scenario: Export button disabled during processing\n    Given I have clicked the \"Export\" button\n    And the export is in progress\n    When I try to click the \"Export\" button again\n    Then the \"Export\" button should be disabled\n    And I should see a processing indicator\n    And multiple downloads should not be triggered\n\n  @edge-case @boundary\n  Scenario: Export works with minimum dataset - single record\n    Given my company has exactly one compliance record\n    When I click the \"Export\" button\n    Then the export should complete successfully\n    And the downloaded file should contain the single record\n    And the Excel file should be properly formatted\n\n  @edge-case @boundary\n  Scenario: Export handles maximum allowed records boundary\n    Given my company has the maximum number of allowed compliance records\n    When I click the \"Export\" button\n    Then the export should complete successfully\n    And all records should be included in the download\n    And the file should not be truncated\n\n  @edge-case @data-handling\n  Scenario: Export works with special characters in company name\n    Given my company name contains special characters\n    When I click the \"Export\" button\n    Then the file should download successfully\n    And the company name in the filename should be properly formatted\n    And special characters should be handled appropriately\n\n  @alternative-flow @ui\n  Scenario: Alternative export access through context menu\n    Given I am viewing compliance records\n    When I right-click on the records table\n    And I select \"Export\" from the context menu\n    Then the export should function the same as the Export button\n    And the file should download with correct format"
}
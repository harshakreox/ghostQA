{
  "id": "feature_1764141189.98313",
  "name": "Cancel Policy",
  "description": "Enable underwriters to cancel policies with Notice of Cancellation status and manage the complete cancellation workflow through IMS integration",
  "created_at": "2025-11-26T11:48:42.182897",
  "updated_at": "2025-11-26T12:43:09.983130",
  "project_id": "952981ca-9688-48c0-b59b-3d35eeea6494",
  "background": [
    {
      "keyword": "Given",
      "text": "I am logged in as an Underwriter"
    },
    {
      "keyword": "And",
      "text": "I have access to the policy management system"
    }
  ],
  "scenarios": [
    {
      "name": "Successfully cancel policy with Notice of Cancellation status",
      "tags": [
        "@smoke",
        "@positive"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the applications list view"
        },
        {
          "keyword": "And",
          "text": "there is an application with 'Notice of Cancellation' status"
        },
        {
          "keyword": "When",
          "text": "I right-click on the application"
        },
        {
          "keyword": "And",
          "text": "I click on the 'Cancel Policy' action button"
        },
        {
          "keyword": "Then",
          "text": "the Application Status should change to 'Pending Cancellation'"
        },
        {
          "keyword": "And",
          "text": "the cancellation request should be submitted successfully"
        }
      ]
    },
    {
      "name": "View Cancel Policy action for Notice of Cancellation status",
      "tags": [
        "@positive",
        "@ui"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am viewing applications list"
        },
        {
          "keyword": "And",
          "text": "an application has 'Notice of Cancellation' status"
        },
        {
          "keyword": "When",
          "text": "I right-click on the application"
        },
        {
          "keyword": "Then",
          "text": "I should see 'Cancel Policy' as one of the action buttons"
        },
        {
          "keyword": "And",
          "text": "the Cancel Policy button should be clickable"
        }
      ]
    },
    {
      "name": "Complete cancellation workflow with IMS synchronization",
      "tags": [
        "@positive",
        "@integration"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has status 'Pending Cancellation'"
        },
        {
          "keyword": "And",
          "text": "the cancellation is bound in IMS"
        },
        {
          "keyword": "When",
          "text": "IMS Status changes to 'Cancelled'"
        },
        {
          "keyword": "And",
          "text": "the system fetches the IMS status"
        },
        {
          "keyword": "Then",
          "text": "the Application Status in EOX should change to 'Cancelled'"
        }
      ]
    },
    {
      "name": "Verify only audit and reinstate actions available after cancellation",
      "tags": [
        "@positive",
        "@workflow"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has status 'Cancelled'"
        },
        {
          "keyword": "When",
          "text": "I right-click on the cancelled application"
        },
        {
          "keyword": "Then",
          "text": "only audit and Reinstate actions should be allowed"
        },
        {
          "keyword": "And",
          "text": "other action buttons should be disabled"
        }
      ]
    },
    {
      "name": "Audit cancelled policy changes status to Unbound - Cancelled",
      "tags": [
        "@positive",
        "@audit"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has status 'Cancelled'"
        },
        {
          "keyword": "When",
          "text": "I perform audit action on the application"
        },
        {
          "keyword": "Then",
          "text": "the status should change to 'Unbound - Cancelled'"
        },
        {
          "keyword": "And",
          "text": "all endorsements should be disabled"
        },
        {
          "keyword": "And",
          "text": "Reinstate should be disabled"
        }
      ]
    },
    {
      "name": "Bind audited cancelled policy to Bound - Cancelled status",
      "tags": [
        "@positive",
        "@binding"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has status 'Unbound - Cancelled'"
        },
        {
          "keyword": "When",
          "text": "the policy is bound in IMS"
        },
        {
          "keyword": "Then",
          "text": "the status should change to 'Bound - Cancelled'"
        }
      ]
    },
    {
      "name": "Cancel Policy action not available for non-Notice of Cancellation status",
      "tags": [
        "@negative",
        "@access-control"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I am on the applications list view"
        },
        {
          "keyword": "And",
          "text": "there is an application with 'Active' status"
        },
        {
          "keyword": "When",
          "text": "I right-click on the application"
        },
        {
          "keyword": "Then",
          "text": "I should not see 'Cancel Policy' as an action option"
        },
        {
          "keyword": "And",
          "text": "the cancellation action should be unavailable"
        }
      ]
    },
    {
      "name": "Error handling when IMS synchronization fails",
      "tags": [
        "@negative",
        "@error-handling"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has status 'Pending Cancellation'"
        },
        {
          "keyword": "And",
          "text": "IMS system is unavailable"
        },
        {
          "keyword": "When",
          "text": "the system attempts to sync cancellation status"
        },
        {
          "keyword": "Then",
          "text": "an error message should be displayed"
        },
        {
          "keyword": "And",
          "text": "the application status should remain 'Pending Cancellation'"
        }
      ]
    },
    {
      "name": "Validation error when cancelling already cancelled policy",
      "tags": [
        "@negative",
        "@validation"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application already has status 'Cancelled'"
        },
        {
          "keyword": "When",
          "text": "I attempt to perform cancel policy action"
        },
        {
          "keyword": "Then",
          "text": "I should see error message 'Policy is already cancelled'"
        },
        {
          "keyword": "And",
          "text": "no status change should occur"
        }
      ]
    },
    {
      "name": "Cancel policy with different status transitions",
      "tags": [
        "@negative",
        "@validation"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has status <current_status>"
        },
        {
          "keyword": "When",
          "text": "I attempt to cancel the policy"
        },
        {
          "keyword": "Then",
          "text": "I should see <result>"
        }
      ]
    },
    {
      "name": "Edge case - Cancel policy at exact moment of status change",
      "tags": [
        "@edge-case",
        "@timing"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has 'Notice of Cancellation' status"
        },
        {
          "keyword": "And",
          "text": "the status is being updated by another process"
        },
        {
          "keyword": "When",
          "text": "I attempt to cancel the policy simultaneously"
        },
        {
          "keyword": "Then",
          "text": "the system should handle the concurrent operation gracefully"
        },
        {
          "keyword": "And",
          "text": "appropriate status should be maintained"
        }
      ]
    },
    {
      "name": "Edge case - Multiple users attempting to cancel same policy",
      "tags": [
        "@edge-case",
        "@concurrency"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "an application has 'Notice of Cancellation' status"
        },
        {
          "keyword": "And",
          "text": "multiple underwriters are viewing the same policy"
        },
        {
          "keyword": "When",
          "text": "both users attempt to cancel the policy simultaneously"
        },
        {
          "keyword": "Then",
          "text": "only one cancellation should be processed"
        },
        {
          "keyword": "And",
          "text": "the second user should see appropriate notification"
        }
      ]
    },
    {
      "name": "Alternative flow - Cancel policy through bulk actions",
      "tags": [
        "@alternative",
        "@bulk-action"
      ],
      "description": null,
      "steps": [
        {
          "keyword": "Given",
          "text": "I have multiple applications with 'Notice of Cancellation' status"
        },
        {
          "keyword": "When",
          "text": "I select multiple applications for bulk cancellation"
        },
        {
          "keyword": "And",
          "text": "I perform bulk cancel policy action"
        },
        {
          "keyword": "Then",
          "text": "all selected applications should change to 'Pending Cancellation'"
        },
        {
          "keyword": "And",
          "text": "bulk cancellation confirmation should be displayed"
        }
      ]
    }
  ],
  "gherkin_content": "Feature: Cancel Policy\n  Enable underwriters to cancel policies with Notice of Cancellation status and manage the complete cancellation workflow through IMS integration\n\n  Background:\n    Given I am logged in as an Underwriter\n    And I have access to the policy management system\n\n  @smoke @positive\n  Scenario: Successfully cancel policy with Notice of Cancellation status\n    Given I am on the applications list view\n    And there is an application with 'Notice of Cancellation' status\n    When I right-click on the application\n    And I click on the 'Cancel Policy' action button\n    Then the Application Status should change to 'Pending Cancellation'\n    And the cancellation request should be submitted successfully\n\n  @positive @ui\n  Scenario: View Cancel Policy action for Notice of Cancellation status\n    Given I am viewing applications list\n    And an application has 'Notice of Cancellation' status\n    When I right-click on the application\n    Then I should see 'Cancel Policy' as one of the action buttons\n    And the Cancel Policy button should be clickable\n\n  @positive @integration\n  Scenario: Complete cancellation workflow with IMS synchronization\n    Given an application has status 'Pending Cancellation'\n    And the cancellation is bound in IMS\n    When IMS Status changes to 'Cancelled'\n    And the system fetches the IMS status\n    Then the Application Status in EOX should change to 'Cancelled'\n\n  @positive @workflow\n  Scenario: Verify only audit and reinstate actions available after cancellation\n    Given an application has status 'Cancelled'\n    When I right-click on the cancelled application\n    Then only audit and Reinstate actions should be allowed\n    And other action buttons should be disabled\n\n  @positive @audit\n  Scenario: Audit cancelled policy changes status to Unbound - Cancelled\n    Given an application has status 'Cancelled'\n    When I perform audit action on the application\n    Then the status should change to 'Unbound - Cancelled'\n    And all endorsements should be disabled\n    And Reinstate should be disabled\n\n  @positive @binding\n  Scenario: Bind audited cancelled policy to Bound - Cancelled status\n    Given an application has status 'Unbound - Cancelled'\n    When the policy is bound in IMS\n    Then the status should change to 'Bound - Cancelled'\n\n  @negative @access-control\n  Scenario: Cancel Policy action not available for non-Notice of Cancellation status\n    Given I am on the applications list view\n    And there is an application with 'Active' status\n    When I right-click on the application\n    Then I should not see 'Cancel Policy' as an action option\n    And the cancellation action should be unavailable\n\n  @negative @error-handling\n  Scenario: Error handling when IMS synchronization fails\n    Given an application has status 'Pending Cancellation'\n    And IMS system is unavailable\n    When the system attempts to sync cancellation status\n    Then an error message should be displayed\n    And the application status should remain 'Pending Cancellation'\n\n  @negative @validation\n  Scenario: Validation error when cancelling already cancelled policy\n    Given an application already has status 'Cancelled'\n    When I attempt to perform cancel policy action\n    Then I should see error message 'Policy is already cancelled'\n    And no status change should occur\n\n  @negative @validation\n  Scenario: Cancel policy with different status transitions\n    Given an application has status <current_status>\n    When I attempt to cancel the policy\n    Then I should see <result>\n\n  @edge-case @timing\n  Scenario: Edge case - Cancel policy at exact moment of status change\n    Given an application has 'Notice of Cancellation' status\n    And the status is being updated by another process\n    When I attempt to cancel the policy simultaneously\n    Then the system should handle the concurrent operation gracefully\n    And appropriate status should be maintained\n\n  @edge-case @concurrency\n  Scenario: Edge case - Multiple users attempting to cancel same policy\n    Given an application has 'Notice of Cancellation' status\n    And multiple underwriters are viewing the same policy\n    When both users attempt to cancel the policy simultaneously\n    Then only one cancellation should be processed\n    And the second user should see appropriate notification\n\n  @alternative @bulk-action\n  Scenario: Alternative flow - Cancel policy through bulk actions\n    Given I have multiple applications with 'Notice of Cancellation' status\n    When I select multiple applications for bulk cancellation\n    And I perform bulk cancel policy action\n    Then all selected applications should change to 'Pending Cancellation'\n    And bulk cancellation confirmation should be displayed"
}